const translations = {
    ja: {
        // Portfolio page
        portfolio: {
            title: "Portfolio",
            description: "App Storeに公開した30個以上のiOSアプリケーション",
            subtitle: "ユーザーの生活を豊かにするアプリを作り続けています",
            publishedApps: "Published Apps",
            totalDownloads: "Total Downloads",
            averageRating: "Average Rating",
            featuredApps: "Featured Apps",
            featuredAppsSubtitle: "代表的なアプリケーション",
            transferredApps: "Transferred Apps",
            transferredAppsSubtitle: "2024年に譲渡したアプリケーション",
            allApps: "All Apps",
            allAppsSubtitle: "開発・公開したすべてのアプリケーション",
            downloads: "ダウンロード",
            rating: "評価",
            category: "カテゴリ",
            viewDetails: "詳細を見る",
            appStore: "App Store",
            transferred: "譲渡済み",
            inDevelopment: "開発中"
        },
        // Transferred apps
        apps: {
            utano: {
                title: "Utano",
                description: "争いの無いみんなで褒め合うSNS（チャット）",
                overview: "Utanoは、争いの無いみんなで褒め合うSNSアプリです。従来のSNSとは異なり、ポジティブなコミュニケーションを重視し、ユーザー同士が互いを褒め合う場を提供します。心温まるやりとりを通じて、より良いコミュニティを築くことを目指しています。",
                feature1: "褒め合いチャット機能",
                feature2: "ポジティブなコミュニケーション",
                feature3: "安心・安全な環境",
                feature4: "コミュニティ機能",
                transferNotice: "このアプリは2024年に譲渡されました。",
                transferNote: "現在の運営・開発は新しい開発者によって行われています。"
            },
            special366: {
                title: "毎日が特別な1 / 366 日",
                description: "誕生日にちなんだ花や石をWidget対応で毎日お届け"
            },
            encyclopedia: {
                title: "なんでも図鑑",
                description: "Gemini AIが写真を分析してなんでも図鑑に登録"
            },
            suzume: {
                title: "すずめ",
                description: "PiP機能でTwitterをどのアプリからでも閲覧"
            },
            marshmallow: {
                title: "マシュマロ音楽プレイヤー",
                description: "Apple MusicやiTunesに対応したシンプルプレイヤー"
            },
            enlarger: {
                title: "画質を良くするアプリ Enlarger",
                description: "最新アルゴリズムで画質を向上させるアプリ"
            },
            hotdog: {
                title: "Hotdog",
                description: "写真がホットドッグかどうか判定＋近くの店舗検索"
            },
            todayWidget: {
                title: "今日は何の日ウィジェット",
                description: "今日は何の日かをウィジェットで確認できるアプリ"
            },
            waterLife: {
                title: "WaterLife",
                description: "水分摂取を管理するライフスタイルアプリ"
            }
        },
        // Categories
        categories: {
            sns: "SNS",
            communication: "Communication",
            widget: "Widget",
            lifestyle: "Lifestyle",
            ai: "AI",
            education: "Education",
            social: "Social",
            pip: "PiP",
            music: "Music",
            media: "Media",
            photo: "Photo",
            fun: "Fun",
            information: "Information",
            health: "Health"
        }
    },
    en: {
        // Portfolio page
        portfolio: {
            title: "Portfolio",
            description: "Over 30 iOS applications published on the App Store",
            subtitle: "Creating apps that enrich users' daily lives",
            publishedApps: "Published Apps",
            totalDownloads: "Total Downloads",
            averageRating: "Average Rating",
            featuredApps: "Featured Apps",
            featuredAppsSubtitle: "Representative applications",
            transferredApps: "Transferred Apps",
            transferredAppsSubtitle: "Applications transferred in 2024",
            allApps: "All Apps",
            allAppsSubtitle: "All developed and published applications",
            downloads: "Downloads",
            rating: "Rating",
            category: "Category",
            viewDetails: "View Details",
            appStore: "App Store",
            transferred: "Transferred",
            inDevelopment: "In Development"
        },
        // Transferred apps
        apps: {
            utano: {
                title: "Utano",
                description: "A peaceful SNS (chat) where everyone compliments each other",
                overview: "Utano is an SNS app where everyone compliments each other without conflict. Unlike traditional SNS, it emphasizes positive communication and provides a place for users to compliment each other. It aims to build a better community through heartwarming interactions.",
                feature1: "Compliment chat feature",
                feature2: "Positive communication",
                feature3: "Safe and secure environment",
                feature4: "Community features",
                transferNotice: "This app was transferred in 2024.",
                transferNote: "Current operation and development are being carried out by new developers."
            },
            special366: {
                title: "Every Day is Special 1/366",
                description: "Daily delivery of flowers and stones related to birthdays with Widget support"
            },
            encyclopedia: {
                title: "Everything Encyclopedia",
                description: "Gemini AI analyzes photos and registers them in the encyclopedia"
            },
            suzume: {
                title: "Suzume",
                description: "Browse Twitter from any app with PiP feature"
            },
            marshmallow: {
                title: "Marshmallow Music Player",
                description: "Simple player compatible with Apple Music and iTunes"
            },
            enlarger: {
                title: "Image Quality Enhancer Enlarger",
                description: "App that improves image quality with the latest algorithms"
            },
            hotdog: {
                title: "Hotdog",
                description: "Determine if a photo is a hotdog + find nearby stores"
            },
            todayWidget: {
                title: "What Day is Today Widget",
                description: "App to check what day it is today with a widget"
            },
            waterLife: {
                title: "WaterLife",
                description: "Lifestyle app for managing water intake"
            }
        },
        // Categories
        categories: {
            sns: "SNS",
            communication: "Communication",
            widget: "Widget",
            lifestyle: "Lifestyle",
            ai: "AI",
            education: "Education",
            social: "Social",
            pip: "PiP",
            music: "Music",
            media: "Media",
            photo: "Photo",
            fun: "Fun",
            information: "Information",
            health: "Health"
        },
        // Common UI elements
        overview: "Overview",
        features: "Main Features",
        transferInfo: "About Transfer",
        transferDetails: "Transfer Details",
        transferYear: "Transfer Year",
        originalDeveloper: "Original Developer",
        currentStatus: "Current Status",
        continuousOperation: "Continuous Operation",
        technicalInfo: "Technical Information",
        platform: "Platform",
        category: "Category",
        developmentLanguage: "Development Language",
        back: "Back"
    }
};

// 翻訳関数
function t(key, lang = getCurrentLanguage()) {
    const keys = key.split('.');
    let result = translations[lang];
    
    for (const k of keys) {
        if (result && typeof result === 'object' && k in result) {
            result = result[k];
        } else {
            // Fallback to Japanese if key not found
            result = translations.ja;
            for (const k2 of keys) {
                if (result && typeof result === 'object' && k2 in result) {
                    result = result[k2];
                } else {
                    return key; // Return key if translation not found
                }
            }
            return result;
        }
    }
    
    return result;
}

// 現在の言語を取得
function getCurrentLanguage() {
    return localStorage.getItem('language') || 'ja';
}

// 言語を設定
function setLanguage(lang) {
    localStorage.setItem('language', lang);
    updatePageTranslations();
}

// ページの翻訳を更新
function updatePageTranslations() {
    const lang = getCurrentLanguage();
    document.documentElement.lang = lang;
    
    // data-i18n属性を持つ要素を更新
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        element.textContent = t(key);
    });
    
    // data-i18n-placeholder属性を持つ要素を更新
    document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
        const key = element.getAttribute('data-i18n-placeholder');
        element.placeholder = t(key);
    });
    
    // 言語切替ボタンの状態を更新
    document.querySelectorAll('.lang-switch button').forEach(button => {
        if (button.getAttribute('data-lang') === lang) {
            button.classList.add('active');
        } else {
            button.classList.remove('active');
        }
    });
}

// DOM読み込み完了時に実行
document.addEventListener('DOMContentLoaded', function() {
    updatePageTranslations();
});