const translations = {
    ja: {
        // Portfolio page
        portfolio: {
            title: "Portfolio",
            description: "App Storeに公開した30個以上のiOSアプリケーション",
            subtitle: "ユーザーの生活を豊かにするアプリを作り続けています",
            publishedApps: "Published Apps",
            totalDownloads: "Total Downloads",
            averageRating: "Average Rating",
            featuredApps: "Featured Apps",
            featuredAppsSubtitle: "代表的なアプリケーション",
            transferredApps: "Transferred Apps",
            transferredAppsSubtitle: "2024年に譲渡したアプリケーション",
            allApps: "All Apps",
            allAppsSubtitle: "開発・公開したすべてのアプリケーション",
            downloads: "ダウンロード",
            rating: "評価",
            category: "カテゴリ",
            viewDetails: "詳細を見る",
            appStore: "App Store",
            transferred: "譲渡済み",
            inDevelopment: "開発中"
        },
        // Transferred apps
        apps: {
            utano: {
                title: "Utano",
                description: "争いの無いみんなで褒め合うSNS（チャット）",
                overview: "Utanoは、争いの無いみんなで褒め合うSNSアプリです。従来のSNSとは異なり、ポジティブなコミュニケーションを重視し、ユーザー同士が互いを褒め合う場を提供します。心温まるやりとりを通じて、より良いコミュニティを築くことを目指しています。",
                feature1: "褒め合いチャット機能",
                feature2: "ポジティブなコミュニケーション",
                feature3: "安心・安全な環境",
                feature4: "コミュニティ機能",
                transferNotice: "このアプリは2024年に譲渡されました。",
                transferNote: "現在の運営・開発は新しい開発者によって行われています。"
            },
            special366: {
                title: "毎日が特別な1 / 366 日",
                description: "誕生日にちなんだ花や石をWidget対応で毎日お届け"
            },
            encyclopedia: {
                title: "なんでも図鑑",
                description: "Gemini AIが写真を分析してなんでも図鑑に登録"
            },
            suzume: {
                title: "すずめ",
                description: "PiP機能でTwitterをどのアプリからでも閲覧"
            },
            marshmallow: {
                title: "マシュマロ音楽プレイヤー",
                description: "Apple MusicやiTunesに対応したシンプルプレイヤー"
            },
            enlarger: {
                title: "画質を良くするアプリ Enlarger",
                description: "最新アルゴリズムで画質を向上させるアプリ"
            },
            hotdog: {
                title: "Hotdog",
                description: "写真がホットドッグかどうか判定＋近くの店舗検索"
            },
            todayWidget: {
                title: "今日は何の日ウィジェット",
                description: "今日は何の日かをウィジェットで確認できるアプリ"
            },
            waterLife: {
                title: "WaterLife",
                description: "水分摂取を管理するライフスタイルアプリ"
            }
        },
        // Categories
        categories: {
            sns: "SNS",
            communication: "Communication",
            widget: "Widget",
            lifestyle: "Lifestyle",
            ai: "AI",
            education: "Education",
            social: "Social",
            pip: "PiP",
            music: "Music",
            media: "Media",
            photo: "Photo",
            fun: "Fun",
            information: "Information",
            health: "Health"
        }
    },
    en: {
        // Portfolio page
        portfolio: {
            title: "Portfolio",
            description: "Over 30 iOS applications published on the App Store",
            subtitle: "Creating apps that enrich users' daily lives",
            publishedApps: "Published Apps",
            totalDownloads: "Total Downloads",
            averageRating: "Average Rating",
            featuredApps: "Featured Apps",
            featuredAppsSubtitle: "Representative applications",
            transferredApps: "Transferred Apps",
            transferredAppsSubtitle: "Applications transferred in 2024",
            allApps: "All Apps",
            allAppsSubtitle: "All developed and published applications",
            downloads: "Downloads",
            rating: "Rating",
            category: "Category",
            viewDetails: "View Details",
            appStore: "App Store",
            transferred: "Transferred",
            inDevelopment: "In Development"
        },
        // Transferred apps
        apps: {
            utano: {
                title: "Utano",
                description: "A peaceful SNS (chat) where everyone compliments each other",
                overview: "Utano is an SNS app where everyone compliments each other without conflict. Unlike traditional SNS, it emphasizes positive communication and provides a place for users to compliment each other. It aims to build a better community through heartwarming interactions.",
                feature1: "Compliment chat feature",
                feature2: "Positive communication",
                feature3: "Safe and secure environment",
                feature4: "Community features",
                transferNotice: "This app was transferred in 2024.",
                transferNote: "Current operation and development are being carried out by new developers."
            },
            special366: {
                title: "Every Day is Special 1/366",
                description: "Daily delivery of flowers and stones related to birthdays with Widget support"
            },
            encyclopedia: {
                title: "Everything Encyclopedia",
                description: "Gemini AI analyzes photos and registers them in the encyclopedia"
            },
            suzume: {
                title: "Suzume",
                description: "Browse Twitter from any app with PiP feature"
            },
            marshmallow: {
                title: "Marshmallow Music Player",
                description: "Simple player compatible with Apple Music and iTunes"
            },
            enlarger: {
                title: "Image Quality Enhancer Enlarger",
                description: "App that improves image quality with the latest algorithms"
            },
            hotdog: {
                title: "Hotdog",
                description: "Determine if a photo is a hotdog + find nearby stores"
            },
            todayWidget: {
                title: "What Day is Today Widget",
                description: "App to check what day it is today with a widget"
            },
            waterLife: {
                title: "WaterLife",
                description: "Lifestyle app for managing water intake"
            }
        },
        // Categories
        categories: {
            sns: "SNS",
            communication: "Communication",
            widget: "Widget",
            lifestyle: "Lifestyle",
            ai: "AI",
            education: "Education",
            social: "Social",
            pip: "PiP",
            music: "Music",
            media: "Media",
            photo: "Photo",
            fun: "Fun",
            information: "Information",
            health: "Health"
        },
        // Common UI elements
        overview: "Overview",
        features: "Main Features",
        transferInfo: "About Transfer",
        transferDetails: "Transfer Details",
        transferYear: "Transfer Year",
        originalDeveloper: "Original Developer",
        currentStatus: "Current Status",
        continuousOperation: "Continuous Operation",
        technicalInfo: "Technical Information",
        platform: "Platform",
        category: "Category",
        developmentLanguage: "Development Language",
        back: "Back"
    },
    ko: {
        // Portfolio page
        portfolio: {
            title: "포트폴리오",
            description: "App Store에 출시한 30개 이상의 iOS 애플리케이션",
            subtitle: "사용자의 삶을 풍요롭게 하는 앱을 만들어가고 있습니다",
            publishedApps: "출시된 앱",
            totalDownloads: "총 다운로드",
            averageRating: "평균 평점",
            featuredApps: "주요 앱",
            featuredAppsSubtitle: "대표적인 애플리케이션",
            transferredApps: "양도된 앱",
            transferredAppsSubtitle: "2024년에 양도된 애플리케이션",
            allApps: "모든 앱",
            allAppsSubtitle: "개발·출시한 모든 애플리케이션",
            downloads: "다운로드",
            rating: "평점",
            category: "카테고리",
            viewDetails: "자세히 보기",
            appStore: "App Store",
            transferred: "양도완료",
            inDevelopment: "개발중"
        },
        // Transferred apps
        apps: {
            utano: {
                title: "Utano",
                description: "갈등 없이 서로를 칭찬하는 SNS (채팅)",
                overview: "Utano는 갈등 없이 서로를 칭찬하는 SNS 앱입니다. 기존 SNS와 달리 긍정적인 소통을 중시하며, 사용자들이 서로를 칭찬할 수 있는 공간을 제공합니다. 따뜻한 소통을 통해 더 나은 커뮤니티를 만드는 것을 목표로 합니다.",
                feature1: "칭찬 채팅 기능",
                feature2: "긍정적인 커뮤니케이션",
                feature3: "안전하고 안심할 수 있는 환경",
                feature4: "커뮤니티 기능",
                transferNotice: "이 앱은 2024년에 양도되었습니다.",
                transferNote: "현재의 운영·개발은 새로운 개발자가 담당하고 있습니다."
            },
            special366: {
                title: "매일이 특별한 1/366일",
                description: "생일에 맞는 꽃과 돌을 위젯으로 매일 전달"
            },
            encyclopedia: {
                title: "무엇이든 도감",
                description: "Gemini AI가 사진을 분석하여 도감에 등록"
            },
            suzume: {
                title: "참새",
                description: "PiP 기능으로 어떤 앱에서든 Twitter 이용"
            },
            marshmallow: {
                title: "마시멜로 음악 플레이어",
                description: "Apple Music과 iTunes에 대응하는 심플 플레이어"
            },
            enlarger: {
                title: "화질 개선 앱 Enlarger",
                description: "최신 알고리즘으로 화질을 향상시키는 앱"
            },
            hotdog: {
                title: "Hotdog",
                description: "사진이 핫도그인지 판정 + 근처 매장 검색"
            },
            todayWidget: {
                title: "오늘은 무슨 날 위젯",
                description: "오늘이 무슨 날인지 위젯으로 확인할 수 있는 앱"
            },
            waterLife: {
                title: "WaterLife",
                description: "수분 섭취를 관리하는 라이프스타일 앱"
            }
        },
        // Categories
        categories: {
            sns: "SNS",
            communication: "커뮤니케이션",
            widget: "위젯",
            lifestyle: "라이프스타일",
            ai: "AI",
            education: "교육",
            social: "소셜",
            pip: "PiP",
            music: "음악",
            media: "미디어",
            photo: "사진",
            fun: "재미",
            information: "정보",
            health: "건강"
        },
        // Common UI elements
        overview: "개요",
        features: "주요 기능",
        transferInfo: "양도에 대해",
        transferDetails: "양도 세부사항",
        transferYear: "양도 연도",
        originalDeveloper: "원 개발자",
        currentStatus: "현재 상태",
        continuousOperation: "지속 운영중",
        technicalInfo: "기술 정보",
        platform: "플랫폼",
        category: "카테고리",
        developmentLanguage: "개발 언어",
        back: "뒤로"
    }
};

// 翻訳関数
function t(key, lang = getCurrentLanguage()) {
    const keys = key.split('.');
    let result = translations[lang];
    
    for (const k of keys) {
        if (result && typeof result === 'object' && k in result) {
            result = result[k];
        } else {
            // Fallback to Japanese if key not found
            result = translations.ja;
            for (const k2 of keys) {
                if (result && typeof result === 'object' && k2 in result) {
                    result = result[k2];
                } else {
                    return key; // Return key if translation not found
                }
            }
            return result;
        }
    }
    
    return result;
}

// 現在の言語を取得
function getCurrentLanguage() {
    // URLパスから言語を判定
    const path = window.location.pathname;
    if (path.includes('/en/')) {
        return 'en';
    } else if (path.includes('/ko/')) {
        return 'ko';
    }
    // ローカルストレージまたはデフォルト日本語
    return localStorage.getItem('language') || 'ja';
}

// 言語を設定
function setLanguage(lang) {
    localStorage.setItem('language', lang);
    updatePageTranslations();
}

// ページの翻訳を更新
function updatePageTranslations() {
    const lang = getCurrentLanguage();
    document.documentElement.lang = lang;
    
    // data-i18n属性を持つ要素を更新
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        element.textContent = t(key);
    });
    
    // data-i18n-placeholder属性を持つ要素を更新
    document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
        const key = element.getAttribute('data-i18n-placeholder');
        element.placeholder = t(key);
    });
    
    // 言語切替ボタンの状態を更新
    document.querySelectorAll('.lang-switch button').forEach(button => {
        if (button.getAttribute('data-lang') === lang) {
            button.classList.add('active');
        } else {
            button.classList.remove('active');
        }
    });
}

// DOM読み込み完了時に実行
document.addEventListener('DOMContentLoaded', function() {
    updatePageTranslations();
});