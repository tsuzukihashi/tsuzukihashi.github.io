const translations = {
    ja: {
        // Portfolio page
        portfolio: {
            title: "Portfolio",
            description: "App Storeに公開した30個以上のiOSアプリケーション",
            subtitle: "ユーザーの生活を豊かにするアプリを作り続けています",
            publishedApps: "Published Apps",
            totalDownloads: "Total Downloads",
            averageRating: "Average Rating",
            featuredApps: "Featured Apps",
            featuredAppsSubtitle: "代表的なアプリケーション",
            transferredApps: "Transferred Apps",
            transferredAppsSubtitle: "2024年に譲渡したアプリケーション",
            allApps: "All Apps",
            allAppsSubtitle: "開発・公開したすべてのアプリケーション",
            downloads: "ダウンロード",
            rating: "評価",
            category: "カテゴリ",
            viewDetails: "詳細を見る",
            appStore: "App Store",
            transferred: "譲渡済み",
            inDevelopment: "開発中"
        },
        // Transferred apps
        apps: {
            utano: {
                title: "Utano",
                description: "争いの無いみんなで褒め合うSNS（チャット）",
                overview: "Utanoは、争いの無いみんなで褒め合うSNSアプリです。従来のSNSとは異なり、ポジティブなコミュニケーションを重視し、ユーザー同士が互いを褒め合う場を提供します。心温まるやりとりを通じて、より良いコミュニティを築くことを目指しています。",
                feature1: "褒め合いチャット機能",
                feature2: "ポジティブなコミュニケーション",
                feature3: "安心・安全な環境",
                feature4: "コミュニティ機能",
                transferNotice: "このアプリは2024年に譲渡されました。",
                transferNote: "現在の運営・開発は新しい開発者によって行われています。"
            },
            special366: {
                title: "毎日が特別な1 / 366 日",
                description: "誕生日にちなんだ花や石をWidget対応で毎日お届け"
            },
            encyclopedia: {
                title: "なんでも図鑑",
                description: "Gemini AIが写真を分析してなんでも図鑑に登録"
            },
            suzume: {
                title: "すずめ",
                description: "PiP機能でTwitterをどのアプリからでも閲覧"
            },
            marshmallow: {
                title: "マシュマロ音楽プレイヤー",
                description: "Apple MusicやiTunesに対応したシンプルプレイヤー"
            },
            enlarger: {
                title: "画質を良くするアプリ Enlarger",
                description: "最新アルゴリズムで画質を向上させるアプリ"
            },
            hotdog: {
                title: "Hotdog",
                description: "写真がホットドッグかどうか判定＋近くの店舗検索"
            },
            todayWidget: {
                title: "今日は何の日ウィジェット",
                description: "今日は何の日かをウィジェットで確認できるアプリ"
            },
            waterLife: {
                title: "WaterLife",
                description: "水分摂取を管理するライフスタイルアプリ"
            }
        },
        // Featured Apps
        featuredApps: {
            travelMemoryMap: {
                title: "旅行思い出マップ",
                description: "写真をパズルのように切り取って地図に記録する旅行思い出アプリ。47都道府県・北海道179市町村・東京都62市区町村のマップで思い出を残そう。"
            }
        },
        // App Detail Pages
        apps: {
            travelMemoryMap: {
                title: "旅行思い出マップ",
                description: "写真をパズルのように切り取って地図に記録する旅行思い出アプリ",
                overview: "旅行思い出マップは、あなたの旅行体験を視覚的に記録し、思い出を美しく整理できるアプリです。写真をパズルピースのように切り取って日本地図上に配置することで、旅行の軌跡を一目で確認できます。8年間のアプリ開発経験を持つ個人開発者が、SNSで見た都道府県の写真パズルポスターにインスピレーションを受けて開発しました。",
                feature1: "写真をパズルピースとして日本地図に配置",
                feature2: "都道府県別の旅行記録と思い出の整理",
                feature3: "視覚的で美しい旅行履歴の表示",
                feature4: "直感的な操作で簡単に思い出を記録",
                feature5: "旅行の進捗を地図で確認",
                developmentStory: "このアプリは、SNSで都道府県の形にした写真パズルポスターを見たことがきっかけで誕生しました。「これをアプリでできたら、もっと多くの人が気軽に楽しめるのでは」という想いから開発をスタート。2024年2月にリリースし、多くのユーザーに愛用されています。"
            }
        },
        // App Detail Sections
        appDetail: {
            overview: "概要",
            keyFeatures: "主な機能",
            developmentStory: "開発ストーリー",
            appInfo: "アプリ情報",
            category: "カテゴリー",
            platform: "プラットフォーム",
            price: "価格",
            free: "無料",
            releaseDate: "リリース日",
            developer: "開発者",
            achievements: "実績",
            popularCategory: "人気カテゴリー",
            technicalDetails: "技術詳細",
            technologies: "使用技術",
            requirements: "動作要件",
            relatedApps: "関連アプリ"
        },
        // Categories
        categories: {
            sns: "SNS",
            communication: "Communication",
            widget: "Widget",
            lifestyle: "Lifestyle",
            ai: "AI",
            education: "Education",
            social: "Social",
            pip: "PiP",
            music: "Music",
            media: "Media",
            photo: "Photo",
            fun: "Fun",
            information: "Information",
            health: "Health",
            travel: "Travel",
            photography: "Photography",
            travelAndPhoto: "旅行 & 写真"
        }
    },
    en: {
        // Portfolio page
        portfolio: {
            title: "Portfolio",
            description: "Over 30 iOS applications published on the App Store",
            subtitle: "Creating apps that enrich users' daily lives",
            publishedApps: "Published Apps",
            totalDownloads: "Total Downloads",
            averageRating: "Average Rating",
            featuredApps: "Featured Apps",
            featuredAppsSubtitle: "Representative applications",
            transferredApps: "Transferred Apps",
            transferredAppsSubtitle: "Applications transferred in 2024",
            allApps: "All Apps",
            allAppsSubtitle: "All developed and published applications",
            downloads: "Downloads",
            rating: "Rating",
            category: "Category",
            viewDetails: "View Details",
            appStore: "App Store",
            transferred: "Transferred",
            inDevelopment: "In Development"
        },
        // Transferred apps
        apps: {
            utano: {
                title: "Utano",
                description: "A peaceful SNS (chat) where everyone compliments each other",
                overview: "Utano is an SNS app where everyone compliments each other without conflict. Unlike traditional SNS, it emphasizes positive communication and provides a place for users to compliment each other. It aims to build a better community through heartwarming interactions.",
                feature1: "Compliment chat feature",
                feature2: "Positive communication",
                feature3: "Safe and secure environment",
                feature4: "Community features",
                transferNotice: "This app was transferred in 2024.",
                transferNote: "Current operation and development are being carried out by new developers."
            },
            special366: {
                title: "Every Day is Special 1/366",
                description: "Daily delivery of flowers and stones related to birthdays with Widget support"
            },
            encyclopedia: {
                title: "Everything Encyclopedia",
                description: "Gemini AI analyzes photos and registers them in the encyclopedia"
            },
            suzume: {
                title: "Suzume",
                description: "Browse Twitter from any app with PiP feature"
            },
            marshmallow: {
                title: "Marshmallow Music Player",
                description: "Simple player compatible with Apple Music and iTunes"
            },
            enlarger: {
                title: "Image Quality Enhancer Enlarger",
                description: "App that improves image quality with the latest algorithms"
            },
            hotdog: {
                title: "Hotdog",
                description: "Determine if a photo is a hotdog + find nearby stores"
            },
            todayWidget: {
                title: "What Day is Today Widget",
                description: "App to check what day it is today with a widget"
            },
            waterLife: {
                title: "WaterLife",
                description: "Lifestyle app for managing water intake"
            }
        },
        // Featured Apps
        featuredApps: {
            travelMemoryMap: {
                title: "Travel Memory Map",
                description: "A travel memory app that cuts photos like puzzle pieces and records them on a map. Create memories on maps of 47 prefectures, 179 municipalities in Hokkaido, and 62 cities/wards in Tokyo."
            }
        },
        // App Detail Pages
        apps: {
            travelMemoryMap: {
                title: "Travel Memory Map",
                description: "A travel memory app that cuts photos like puzzle pieces and records them on a map",
                overview: "Travel Memory Map allows you to visually record your travel experiences and beautifully organize your memories. By cutting photos like puzzle pieces and placing them on a map of Japan, you can see your travel journey at a glance. Developed by an individual developer with 9 years of app development experience, inspired by a photo puzzle poster of prefectures seen on social media.",
                feature1: "Place photos as puzzle pieces on a map of Japan",
                feature2: "Record and organize travel memories by prefecture",
                feature3: "Visual and beautiful display of travel history",
                feature4: "Intuitive operation for easy memory recording",
                feature5: "Track travel progress on the map",
                developmentStory: "This app was born from seeing a photo puzzle poster shaped like prefectures on social media. Development started with the thought \"If this could be done in an app, more people could enjoy it easily.\" Released in February 2024, it has been loved by many users."
            }
        },
        // App Detail Sections
        appDetail: {
            overview: "Overview",
            keyFeatures: "Key Features",
            developmentStory: "Development Story",
            appInfo: "App Information",
            category: "Category",
            platform: "Platform",
            price: "Price",
            free: "Free",
            releaseDate: "Release Date",
            developer: "Developer",
            achievements: "Achievements",
            popularCategory: "Popular Category",
            technicalDetails: "Technical Details",
            technologies: "Technologies Used",
            requirements: "Requirements",
            relatedApps: "Related Apps"
        },
        // Categories
        categories: {
            sns: "SNS",
            communication: "Communication",
            widget: "Widget",
            lifestyle: "Lifestyle",
            ai: "AI",
            education: "Education",
            social: "Social",
            pip: "PiP",
            music: "Music",
            media: "Media",
            photo: "Photo",
            fun: "Fun",
            information: "Information",
            health: "Health",
            travel: "Travel",
            photography: "Photography",
            travelAndPhoto: "Travel & Photography"
        },
        // Common UI elements
        overview: "Overview",
        features: "Main Features",
        transferInfo: "About Transfer",
        transferDetails: "Transfer Details",
        transferYear: "Transfer Year",
        originalDeveloper: "Original Developer",
        currentStatus: "Current Status",
        continuousOperation: "Continuous Operation",
        technicalInfo: "Technical Information",
        platform: "Platform",
        category: "Category",
        developmentLanguage: "Development Language",
        back: "Back"
    },
    ko: {
        // Portfolio page
        portfolio: {
            title: "포트폴리오",
            description: "App Store에 출시한 30개 이상의 iOS 애플리케이션",
            subtitle: "사용자의 삶을 풍요롭게 하는 앱을 만들어가고 있습니다",
            publishedApps: "출시된 앱",
            totalDownloads: "총 다운로드",
            averageRating: "평균 평점",
            featuredApps: "주요 앱",
            featuredAppsSubtitle: "대표적인 애플리케이션",
            transferredApps: "양도된 앱",
            transferredAppsSubtitle: "2024년에 양도된 애플리케이션",
            allApps: "모든 앱",
            allAppsSubtitle: "개발·출시한 모든 애플리케이션",
            downloads: "다운로드",
            rating: "평점",
            category: "카테고리",
            viewDetails: "자세히 보기",
            appStore: "App Store",
            transferred: "양도완료",
            inDevelopment: "개발중"
        },
        // Transferred apps
        apps: {
            utano: {
                title: "Utano",
                description: "갈등 없이 서로를 칭찬하는 SNS (채팅)",
                overview: "Utano는 갈등 없이 서로를 칭찬하는 SNS 앱입니다. 기존 SNS와 달리 긍정적인 소통을 중시하며, 사용자들이 서로를 칭찬할 수 있는 공간을 제공합니다. 따뜻한 소통을 통해 더 나은 커뮤니티를 만드는 것을 목표로 합니다.",
                feature1: "칭찬 채팅 기능",
                feature2: "긍정적인 커뮤니케이션",
                feature3: "안전하고 안심할 수 있는 환경",
                feature4: "커뮤니티 기능",
                transferNotice: "이 앱은 2024년에 양도되었습니다.",
                transferNote: "현재의 운영·개발은 새로운 개발자가 담당하고 있습니다."
            },
            special366: {
                title: "매일이 특별한 1/366일",
                description: "생일에 맞는 꽃과 돌을 위젯으로 매일 전달"
            },
            encyclopedia: {
                title: "무엇이든 도감",
                description: "Gemini AI가 사진을 분석하여 도감에 등록"
            },
            suzume: {
                title: "참새",
                description: "PiP 기능으로 어떤 앱에서든 Twitter 이용"
            },
            marshmallow: {
                title: "마시멜로 음악 플레이어",
                description: "Apple Music과 iTunes에 대응하는 심플 플레이어"
            },
            enlarger: {
                title: "화질 개선 앱 Enlarger",
                description: "최신 알고리즘으로 화질을 향상시키는 앱"
            },
            hotdog: {
                title: "Hotdog",
                description: "사진이 핫도그인지 판정 + 근처 매장 검색"
            },
            todayWidget: {
                title: "오늘은 무슨 날 위젯",
                description: "오늘이 무슨 날인지 위젯으로 확인할 수 있는 앱"
            },
            waterLife: {
                title: "WaterLife",
                description: "수분 섭취를 관리하는 라이프스타일 앱"
            }
        },
        // Featured Apps
        featuredApps: {
            travelMemoryMap: {
                title: "여행 추억 지도",
                description: "사진을 퍼즐처럼 잘라서 지도에 기록하는 여행 추억 앱. 47개 도도부현, 홋카이도 179개 시정촌, 도쿄도 62개 시구정촌의 지도에서 추억을 남기세요."
            }
        },
        // App Detail Pages
        apps: {
            travelMemoryMap: {
                title: "Travel Memory Map",
                description: "사진을 퍼즐처럼 잘라서 지도에 기록하는 여행 추억 앱",
                overview: "Travel Memory Map은 여행 경험을 시각적으로 기록하고 추억을 아름답게 정리할 수 있는 앱입니다. 사진을 퍼즐 조각처럼 잘라서 일본 지도 위에 배치함으로써 여행의 궤적을 한눈에 확인할 수 있습니다. 8년간의 앱 개발 경험을 가진 개인 개발자가 SNS에서 본 도도부현 사진 퍼즐 포스터에서 영감을 받아 개발했습니다.",
                feature1: "사진을 퍼즐 조각으로 일본 지도에 배치",
                feature2: "도도부현별 여행 기록과 추억 정리",
                feature3: "시각적이고 아름다운 여행 이력 표시",
                feature4: "직관적인 조작으로 쉬운 추억 기록",
                feature5: "지도에서 여행 진행 상황 확인",
                developmentStory: "이 앱은 SNS에서 도도부현 모양으로 만든 사진 퍼즐 포스터를 본 것이 계기가 되어 탄생했습니다. \"이것을 앱으로 할 수 있다면 더 많은 사람들이 쉽게 즐길 수 있지 않을까\"라는 생각에서 개발을 시작했습니다. 2024년 2월에 출시되어 많은 사용자들에게 사랑받고 있습니다."
            }
        },
        // App Detail Sections
        appDetail: {
            overview: "개요",
            keyFeatures: "주요 기능",
            developmentStory: "개발 스토리",
            appInfo: "앱 정보",
            category: "카테고리",
            platform: "플랫폼",
            price: "가격",
            free: "무료",
            releaseDate: "출시일",
            developer: "개발자",
            achievements: "성과",
            popularCategory: "인기 카테고리",
            technicalDetails: "기술 세부사항",
            technologies: "사용 기술",
            requirements: "동작 요구사항",
            relatedApps: "관련 앱"
        },
        // Categories
        categories: {
            sns: "SNS",
            communication: "커뮤니케이션",
            widget: "위젯",
            lifestyle: "라이프스타일",
            ai: "AI",
            education: "교육",
            social: "소셜",
            pip: "PiP",
            music: "음악",
            media: "미디어",
            photo: "사진",
            fun: "재미",
            information: "정보",
            health: "건강",
            travel: "여행",
            photography: "사진",
            travelAndPhoto: "여행 & 사진"
        },
        // Common UI elements
        overview: "개요",
        features: "주요 기능",
        transferInfo: "양도에 대해",
        transferDetails: "양도 세부사항",
        transferYear: "양도 연도",
        originalDeveloper: "원 개발자",
        currentStatus: "현재 상태",
        continuousOperation: "지속 운영중",
        technicalInfo: "기술 정보",
        platform: "플랫폼",
        category: "카테고리",
        developmentLanguage: "개발 언어",
        back: "뒤로"
    }
};

// 翻訳関数
function t(key, lang = getCurrentLanguage()) {
    const keys = key.split('.');
    let result = translations[lang];
    
    for (const k of keys) {
        if (result && typeof result === 'object' && k in result) {
            result = result[k];
        } else {
            // Fallback to Japanese if key not found
            result = translations.ja;
            for (const k2 of keys) {
                if (result && typeof result === 'object' && k2 in result) {
                    result = result[k2];
                } else {
                    return key; // Return key if translation not found
                }
            }
            return result;
        }
    }
    
    return result;
}

// 現在の言語を取得
function getCurrentLanguage() {
    // URLパスから言語を判定
    const path = window.location.pathname;
    if (path.includes('/en/')) {
        return 'en';
    } else if (path.includes('/ko/')) {
        return 'ko';
    }
    // ローカルストレージまたはデフォルト日本語
    return localStorage.getItem('language') || 'ja';
}

// 言語を設定
function setLanguage(lang) {
    localStorage.setItem('language', lang);
    updatePageTranslations();
}

// ページの翻訳を更新
function updatePageTranslations() {
    const lang = getCurrentLanguage();
    document.documentElement.lang = lang;
    
    // data-i18n属性を持つ要素を更新
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        element.textContent = t(key);
    });
    
    // data-i18n-placeholder属性を持つ要素を更新
    document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
        const key = element.getAttribute('data-i18n-placeholder');
        element.placeholder = t(key);
    });
    
    // 言語切替ボタンの状態を更新
    document.querySelectorAll('.lang-switch button').forEach(button => {
        if (button.getAttribute('data-lang') === lang) {
            button.classList.add('active');
        } else {
            button.classList.remove('active');
        }
    });
}

// DOM読み込み完了時に実行
document.addEventListener('DOMContentLoaded', function() {
    updatePageTranslations();
});